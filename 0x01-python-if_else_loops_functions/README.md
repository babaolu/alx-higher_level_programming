Dealing with conditional statement, loops and functions